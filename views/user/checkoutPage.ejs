<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/65b842e152.js" crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap"
        rel="stylesheet">
    <title>Check Out</title>
    <!-- Additional CSS Files -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="/css/font-awesome.css">

    <link rel="stylesheet" href="/css/templatemo-hexashop.css">

    <link rel="stylesheet" href="/css/owl-carousel.css">

    <link rel="stylesheet" href="/css/lightbox.css">


    <script src="/js/customerAjax.js"></script>


    <!-- Additional styles -->
    <style>
        .icon-hover-primary:hover {
            border-color: #3b71ca !important;
            background-color: white !important;
        }

        .icon-hover-primary:hover i {
            color: #3b71ca !important;
        }

        .icon-hover-danger:hover {
            border-color: #dc4c64 !important;
            background-color: white !important;
        }

        .icon-hover-danger:hover i {
            color: #dc4c64 !important;
        }
    </style>
    <style>
        *::selection {
            background-color: transparent;
        }

        * {
            cursor: default;
            box-sizing: border-box;
        }





        .contenir {
            width: 740px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-color: black;
            margin-left: -175px;
        }





        .search {
            box-shadow: 0px 0px 20px 1px #ffffff;
            border: 0;
            border-radius: 30px 0 0 30px;
            padding: 0 10px 0 10px;
            color: black;
            height: 40px;
            width: 400px;
            font-size: 25px;
            font-weight: 1000;
            background-color: rgb(234, 234, 234);
        }

        .search::selection {
            background-color: red;
            color: white;
        }

        .search:focus {
            border: 0;
            outline: 0;
        }

        .search:hover {
            cursor: text;
        }





        .search-btn {
            transition: 0.2s ease-in-out;
            border: 0;
            border-radius: 0 30px 30px 0;
            padding: 0 10px 0 10px;
            text-align: center;
            color: rgb(255, 255, 255);
            position: relative;
            background-color: rgb(15, 19, 9);
            height: 40px;
            width: 70px;
            font-size: 25px;
            font-weight: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-btn:hover {
            transition: 0.2s ease-in-out;
            font-size: 30px;
            font-weight: 800;
            cursor: pointer;
        }
    </style>
</head>

<body>


    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo">
                            <img src="/images/ds_blk.png" style="max-width: 120px;margin-left: -260px;">
                        </a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav" style="margin-right: -200px;">
                            <div class="contenir">
                                <form class="d-flex" action="/search">
                                    <input type="text" name="search" class="search" id="search-inp"
                                        placeholder="Search...">
                                    <button class="search-btn" id="search-inp-btn">&#x027A4;</button>
                                </form>
                            </div>
                            <li class="scroll-to-section"><a href="/userhome" class="active">Home</a></li>
                            <li class="scroll-to-section"><a href="/userhome#men">Men's</a></li>
                            <li class="scroll-to-section"><a href="/userhome#women">Women's</a></li>
                            <li class="scroll-to-section"><a href="/userhome#kids">Kid's</a></li>
                            <li class="submenu">
                                <a href="javascript:;">Pages</a>
                                <ul>
                                    <li><a href="about.html">About Us</a></li>
                                    <li><a href="products.html">Products</a></li>
                                    <li><a href="contact.html">Contact Us</a></li>
                                </ul>
                            </li>

                            <li class="submenu">
                                <a href="javascript:;"><i class="fa-solid fa-user" style="color: #000000;"></i></a>
                                <ul>
                                    <li><a href="/allproducts">All Products</a></li>
                                    <li><a href="/userprofile">My Profile</a></li>
                                    <li><a href="/logout" onclick="confirmLogout()">Logout</a></li>
                                </ul>
                            </li>
                            <li><a href=""><i class="fa-solid fa-heart" style="color: #000000;"></i></a></li>
                            <li><a href="/usercart"><i class="fa-solid fa-cart-shopping"
                                        style="color: #000000;"></i></a></li>


                            <% if (locals.check) { %>
                                <div class="" style="color: #000000;text-transform: capitalize;margin-top: 7px;">Hello,
                                    <%- check.username %>
                                </div>
                                <% } %>

                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>



    <!-- cart + summary -->
    <section class="bg-light my-5" style="padding-top: 100px;">
        <div class="container">
            <div class="row">


                <!-- Addresses -->

                <div class="col-lg-9">
                    <div class="card-header">
                        <h4 class="card-title ">Delivery Address</h4>
                    </div>
                    <div class="card border shadow-0">
                        <div class="m-4">

                            <!-- Container to display existing addresses -->
                            <div id="existingAddressesContainer">

                                <!-- Display the first address -->
                                <div class="form-check mb-2">
                                    <!-- Container for selected label -->
                                        <div id="selectedLabelContainer" class="float-end"></div>

                                    <input class="form-check-input" type="radio" name="existingAddress" id="address0">

                                    <ul class="address-list">
                                        <!-- Sample address item -->
                                        <li class="address-item">
                                            <button type="button" class="btn btn-info btn-sm"
                                                style="border-radius: 10px; height: 25px; font-size: 12px;">
                                                <%= addrs[0].addressType %>
                                            </button><br><br>
                                            <p style="font-weight: bold;"><%-addrs[0].name-%></p>
                                            <p>
                                                <%= addrs[0].address %>, <%= addrs[0].locality %>, <%= addrs[0].city %>,
                                                            <%= addrs[0].district %>, <%= addrs[0].state %>
                                            </p>
                                            <p><%-addrs[0].mobile-%></p>
                                            <p><%-addrs[0].pincode-%></p>
                                            <br>
                                            <button type="button" class="btn btn-success btn-sm d-none"
                                                id="deliverHereBtn0" onclick="selectAddress('<%-addrs[0]._id-%>')">Deliver
                                                Here</button>
                                        </li>
                                    </ul>
                                    <hr style="color: #9a9a9a;">
                                </div>

                                <!-- Display remaining addresses initially hidden -->
                                <% for (let i=1; i < addrs.length; i++) { %>
                                    <div class="form-check mb-2 hidden-address">
                                        <input class="form-check-input" type="radio" name="existingAddress"
                                            id=<%="address" +i%>>

                                        <ul class="address-list">
                                            <!-- Sample address item -->
                                            <li class="address-item">
                                                <button type="button" class="btn btn-info btn-sm"
                                                    style="border-radius: 10px; height: 25px; font-size: 12px;">
                                                    <%= addrs[i].addressType %>
                                                </button><br><br>
                                                <p style="font-weight: bold;"><%-addrs[i].name-%></p>
                                                <p>
                                                    <%= addrs[i].address %>, <%= addrs[i].locality %>, <%= addrs[i].city
                                                                %>, <%= addrs[i].district %>, <%= addrs[i].state %>
                                                </p>
                                                <p><%-addrs[i].mobile-%></p>
                                                <p><%-addrs[i].pincode-%></p>
                                                <br>
                                                <button type="button" class="btn btn-success btn-sm d-none"
                                                    id=<%="deliverHereBtn" +i%> onclick="selectAddress('<%-addrs[i]._id-%>')">Deliver
                                                    Here</button>
                                            </li>
                                        </ul>
                                        <hr style="color: #9a9a9a;">
                                    </div>
                                    <% } %>

                                        <!-- Show/Hide button for additional addresses -->
                                        <% if (addrs.length> 1) { %>
                                            <div class="text-end">
                                                <a href="#" class="show-all-addresses"
                                                    onclick="toggleHiddenAddresses()">Show All</a>
                                            </div>
                                            <% } %>

                            </div>

                        </div>

                    </div>



                    <br>

                    <!-- Payment Options -->
                    <div class="card-header">
                        <h4 class="card-title ">Payment Options</h4>
                    </div>



                    <!-- Payment Options -->
                    <div class="card border shadow-0">
                        <div class="m-4" style="padding-left: 30px">

                            <!-- Radio buttons for payment options -->
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="paymentOption" id="onlinePayment"
                                    value="onlinePayment">
                                <label class="form-check-label" for="onlinePayment" style="font-weight: bold;">
                                    Online Payment
                                </label>
                            </div>

                            <br>

                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="paymentOption" id="cashOnDelivery"
                                    value="cashOnDelivery">
                                <label class="form-check-label" for="cashOnDelivery" style="font-weight: bold;" >
                                    Cash on Delivery
                                </label>
                            </div>

                            <br>

                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="paymentOption" id="walletPayment"
                                    value="walletPayment">
                                <label class="form-check-label" for="walletPayment" style="font-weight: bold;">
                                    Wallet Payment
                                </label>
                            </div>

                            <!-- Confirm Order button -->
                            <button type="button" class="btn btn-primary mt-3 float-end" id="confirmOrderBtn" onclick="performAjax()" disabled>
                                Confirm Order
                            </button>

                        </div>
                    </div>


                </div>






                <!-- summary -->
                <div class="col-lg-3">
                    <div class="card mb-3 border shadow-0">
                        <div class="card-body">
                            <form>
                                <div class="form-group">
                                    <label class="form-label">Have coupon?</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control border" name=""
                                            placeholder="Coupon code" />
                                        <button class="btn btn-light border">Apply</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="card shadow-0 border">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <p class="mb-2">Total price:</p>
                                <p class="mb-2">₹ <%= total%>
                                </p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="mb-2">Discount:</p>
                                <p class="mb-2 text-success">-₹ <%= totalDiscount %>
                                </p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p class="mb-2">Delivery charges:</p>
                                <span style="font-size: small;color: green;">Free</span><del
                                    class="text-muted text-nowrap" style="font-size: small;">₹ 40 </del>
                            </div>
                            <hr />
                            <div class="d-flex justify-content-between">
                                <p class="mb-2">Total price:</p>
                                <p class="mb-2 fw-bold">₹ <%= grandTotal%>
                                </p>
                            </div>

                            <!-- <div class="mt-3">
                                <a href="#" class="btn btn-success w-100 shadow-0 mb-2"> Place Order </a>
                                <a href="/allproducts" class="btn btn-light w-100 border mt-2"> Back to shop </a>
                            </div> -->
                        </div>
                    </div>
                </div>
                <!-- summary -->
            </div>
        </div>
    </section>
    <!-- cart + summary -->


    <!-- ***** Footer Start ***** -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="first-item">
                        <div class="logo">
                            <img src="/images/ds_wht.png" alt="hexashop ecommerce templatemo" style="max-width: 120px;">
                        </div>
                        <ul>
                            <li><a href="#">16501 Collins Ave, Sunny Isles Beach, FL 33160, India</a></li>
                            <li><a href="#">dropship@company.com</a></li>
                            <li><a href="#">010-020-0340</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <h4>Shopping &amp; Categories</h4>
                    <ul>
                        <li><a href="#">Men’s Shopping</a></li>
                        <li><a href="#">Women’s Shopping</a></li>
                        <li><a href="#">Kid's Shopping</a></li>
                        <li><a href="#">Sports Shopping</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h4>Useful Links</h4>
                    <ul>
                        <li><a href="#">Homepage</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h4>Help &amp; Information</h4>
                    <ul>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">FAQ's</a></li>
                        <li><a href="#">Shipping</a></li>
                        <li><a href="#">Tracking ID</a></li>
                    </ul>
                </div>
                <div class="col-lg-12">
                    <div class="under-footer">
                        <p>Copyright © 2023 DropShip Co., Ltd. All Rights Reserved.

                            <br>
                        <ul>
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#"><i class="fa fa-behance"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</body>

<!-- <script>
  function incrementCounter(button) {
      var input = button.parentNode.querySelector('input[type=number]');
      if (parseInt(input.value) < 5) {
          input.stepUp();
          button.parentNode.querySelector('button[onclick="decrementCounter(this)"]').removeAttribute('disabled');
      } else {
          showError("Cannot add more than 5 products");
      }
  }

  function decrementCounter(button) {
      var input = button.parentNode.querySelector('input[type=number]');
      if (parseInt(input.value) > 1) {
          input.stepDown();
      } else {
          button.setAttribute('disabled', 'disabled');
          showError("Cannot go below 1 product");
      }
  }

  function showError(message) {
      // Display the error message (You can customize this part based on your UI)
      alert(message);
  }
</script> -->


<script>
    // Enable Confirm Order button when a payment option is selected
    document.querySelectorAll('input[name="paymentOption"]').forEach(function (radio) {
        radio.addEventListener('change', function () {
            document.getElementById('confirmOrderBtn').disabled = false;
        });
    });
</script>




<script>
    function deliverHere(address) {
        // Implement the logic to handle delivery for the selected address
        console.log("Deliver Here clicked for address:", address);
    }

    function toggleHiddenAddresses() {
        // Implement the logic to toggle hidden addresses
        console.log("Show All clicked");
    }

    document.querySelectorAll('input[name="existingAddress"]').forEach(function (radio) {
        radio.addEventListener('change', function () {
            // Get the index from the radio button's ID
            var index = parseInt(this.id.replace('address', ''));

            // Hide all "Deliver Here" buttons
            document.querySelectorAll('[id^="deliverHereBtn"]').forEach(function (btn) {
                btn.classList.add('d-none');
            });

            // Show the selected "Deliver Here" button
            var deliverHereBtn = document.getElementById('deliverHereBtn' + index);
            if (deliverHereBtn) {
                deliverHereBtn.classList.remove('d-none');
            }
        });
    });
</script>


<!-- Add this script below your existing scripts -->
<script>
    function toggleHiddenAddresses() {
        // Toggle the visibility of hidden addresses
        var hiddenAddresses = document.querySelectorAll('.hidden-address');
        hiddenAddresses.forEach(address => {
            address.classList.toggle('d-none');
        });
    }
</script>


<script>
    function performAjax() {
        // Get the selected payment option
        var selectedPaymentOption = document.querySelector('input[name="paymentOption"]:checked');

        // Check if a payment option is selected
        if (selectedPaymentOption) {
            // Log or use the selected payment option value
            console.log("Selected Payment Option: " + selectedPaymentOption.value);
            confirmOrder(selectedPaymentOption.value);

            // Continue with other logic for Confirm Order
            // Example: Submit the form or perform other actions
        } else {
            // Handle the case where no payment option is selected
            alert("Please select a payment option before confirming the order.");
        }
    }
</script>






<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>



<% if (locals.logout) { %>
    <script>
        alert("Log out succesfully")
    </script>
    <% } %>



        <% if (locals.login) { %>
            <script>
                alert("Log out succesfully")
            </script>
            <% } %>



                <!-- jQuery -->
                <script src="/js/jquery-2.1.0.min.js"></script>

                <!-- Bootstrap -->
                <script src="/js/popper.js"></script>
                <script src="/js/bootstrap.min.js"></script>

                <!-- Plugins -->
                <script src="/js/owl-carousel.js"></script>
                <script src="/js/accordions.js"></script>
                <script src="/js/datepicker.js"></script>
                <script src="/js/scrollreveal.min.js"></script>
                <script src="/js/waypoints.min.js"></script>
                <script src="/js/jquery.counterup.min.js"></script>
                <script src="/js/imgfix.min.js"></script>
                <script src="/js/slick.js"></script>
                <script src="/js/lightbox.js"></script>
                <script src="/js/isotope.js"></script>

                <!-- Global Init -->
                <script src="/js/custom.js"></script>

                <script>

                    $(function () {
                        var selectedClass = "";
                        $("p").click(function () {
                            selectedClass = $(this).attr("data-rel");
                            $("#portfolio").fadeTo(50, 0.1);
                            $("#portfolio div").not("." + selectedClass).fadeOut();
                            setTimeout(function () {
                                $("." + selectedClass).fadeIn();
                                $("#portfolio").fadeTo(50, 1);
                            }, 500);

                        });
                    });

                </script>





                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
                    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
                    crossorigin="anonymous"></script>
                <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
                    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
                    crossorigin="anonymous"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
                    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
                    crossorigin="anonymous"></script>


                <!-- Bootstrap JavaScript and Popper.js -->
                <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
                    integrity="sha384-sZBJY3n9QFiOfj0z8wA54PzxN+FdoZ9wea4z+9rrpJKY1cZ3gWAg7jPV6BD1KqVd"
                    crossorigin="anonymous"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
                    integrity="sha384-A1DlJ1RQyZR6WjqJOQoKsU97A1HAj/poo/n8mzKbkgsQPZsJ8B9z9xgv76fqcQ1"
                    crossorigin="anonymous"></script>

</html>